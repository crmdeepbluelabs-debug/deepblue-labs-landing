---
/** Usa variable pública si la defines en Vercel (.env):
 *  PUBLIC_FORMSPARK_ID=xxxxxxxx
 *  Si no la tienes aún, deja el string literal.
 */
const FORMSPARK_ID = import.meta.env.FORMSPARK_ID;
const ACTION = `https://submit-form.com/${FORMSPARK_ID}`;
---

<form
  action={ACTION}
  method="POST"
  class="glass-dark rounded-3xl p-6 space-y-4 reveal"
>
  <!-- Redirección tras enviar (opcional, crea src/pages/gracias.astro) -->
  <input type="hidden" name="_redirect" value="/gracias" />
  <!-- Asunto del email que te manda Formspark (opcional) -->
  <input type="hidden" name="_email.subject" value="Nuevo lead — DeepBlue Labs" />

  <!-- Honeypot para bots -->
  <input type="text" name="company" class="hidden" tabindex="-1" autocomplete="off" />

  <!-- Metadatos útiles -->
  <input type="hidden" name="source" value="DeepBlue Labs Landing" />
  <input type="hidden" name="startedAt" value={Date.now()} />

  <h3 class="text-xl font-semibold">Cuéntanos de tu proyecto</h3>
  <p class="text-white/70 text-sm">Respondemos en <span class="font-medium text-white">24–48h</span>.</p>

  <div class="grid gap-4 md:grid-cols-2">
    <label class="block">
      <span class="mb-1 block text-sm text-white/80">Nombre</span>
      <input
        name="name"
        required
        class="w-full rounded-xl border border-white/15 bg-white/10 px-4 py-3 outline-none placeholder:text-white/40 focus:border-sky-300/40"
        placeholder="Tu nombre"
      />
    </label>
    <label class="block">
      <span class="mb-1 block text-sm text-white/80">Email</span>
      <input
        type="email"
        name="email"
        required
        class="w-full rounded-xl border border-white/15 bg-white/10 px-4 py-3 outline-none placeholder:text-white/40 focus:border-sky-300/40"
        placeholder="tu@correo.com"
      />
    </label>
  </div>

  <label class="block">
    <span class="mb-1 block text-sm text-white/80">Presupuesto estimado</span>
    <select
      name="budget"
      class="w-full rounded-xl border border-white/15 bg-white/10 px-4 py-3 outline-none focus:border-sky-300/40"
    >
      <option value="No especificado">No especificado</option>
      <option value="&lt;$5k">Menos de $5k</option>
      <option value="$5k–$15k">$5k–$15k</option>
      <option value="$15k–$40k">$15k–$40k</option>
      <option value="&gt;$40k">Más de $40k</option>
    </select>
  </label>

  <label class="block">
    <span class="mb-1 block text-sm text-white/80">Mensaje</span>
    <textarea
      name="message"
      required
      rows="5"
      class="w-full rounded-xl border border-white/15 bg-white/10 px-4 py-3 outline-none placeholder:text-white/40 focus:border-sky-300/40"
      placeholder="Contexto, objetivos, plazos, integraciones…"
    ></textarea>
  </label>

  <button
    type="submit"
    class="rounded-xl bg-sky-500 px-6 py-3 font-semibold text-slate-900 hover:opacity-95"
  >
    Enviar
  </button>
</form>